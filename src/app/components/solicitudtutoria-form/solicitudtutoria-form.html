<div class="container">
    <div class="card" role="region" aria-labelledby="tutoria-heading">
        <div class="card-header">
            <h2 id="tutoria-heading" tabindex="0">üìö Solicitud de Tutor√≠a</h2>
            <p tabindex="0">Completa el formulario para solicitar una tutor√≠a</p>
        </div>

        <div class="card-body">
            <form [formGroup]="solicitudForm" (ngSubmit)="onSubmit()" novalidate role="form" aria-labelledby="tutoria-heading">
                
                <!-- Campo: Clase/Materia -->
                <div class="form-group">
                    <label for="clase" tabindex="0">Clase/Materia *</label>
                    <input 
                        type="text" 
                        id="clase" 
                        formControlName="clase"
                        placeholder="Ej: Matem√°ticas Avanzadas, Programaci√≥n I, F√≠sica"
                        [class.invalid]="f['clase'].invalid && f['clase'].touched"
                        tabindex="0"
                        aria-required="true"
                        aria-describedby="clase-error"
                    >
                    @if (f['clase'].invalid && f['clase'].touched) {
                    <div class="error-message" id="clase-error" role="alert">
                        @if (f['clase'].errors?.['required']) {
                        <small tabindex="0">La clase es requerida</small>
                        }
                        @if (f['clase'].errors?.['minlength']) {
                        <small tabindex="0">M√≠nimo 3 caracteres</small>
                        }
                    </div>
                    }
                </div>

                <!-- Campo: Temas -->
                <div class="form-group">
                    <label for="temas" tabindex="0">Temas espec√≠ficos *</label>
                    <textarea 
                        id="temas" 
                        formControlName="temas"
                        placeholder="Describe los temas espec√≠ficos que necesitas repasar o entender mejor..."
                        rows="4"
                        [class.invalid]="f['temas'].invalid && f['temas'].touched"
                        tabindex="0"
                        aria-required="true"
                        aria-describedby="temas-error temas-hint"
                    ></textarea>
                    @if (f['temas'].invalid && f['temas'].touched) {
                    <div class="error-message" id="temas-error" role="alert">
                        @if (f['temas'].errors?.['required']) {
                        <small tabindex="0">Los temas son requeridos</small>
                        }
                        @if (f['temas'].errors?.['minlength']) {
                        <small tabindex="0">Por favor, describe al menos 10 caracteres</small>
                        }
                    </div>
                    }
                    <small class="hint" id="temas-hint" tabindex="0">Ej: Derivadas parciales, loops en Python, ecuaciones diferenciales, etc.</small>
                </div>

                <!-- Campo: Dem√°s Alumnos (Opcional) -->
                <div class="form-group">
                    <label for="demasAlumnos" tabindex="0">Compa√±eros de estudio (Opcional)</label>
                    <input 
                        type="text" 
                        id="demasAlumnos" 
                        formControlName="demasAlumnos"
                        placeholder="Nombres de otros alumnos que tambi√©n necesitan la tutor√≠a"
                        tabindex="0"
                        aria-describedby="demas-alumnos-hint"
                    >
                    <small class="hint" id="demas-alumnos-hint" tabindex="0">Separa los nombres con comas. Ej: Mar√≠a Garc√≠a, Juan P√©rez, Carlos L√≥pez</small>
                </div>

                <!-- Informaci√≥n del solicitante (solo lectura) -->
                <div class="user-info" tabindex="0">
                    <h4 tabindex="0">Informaci√≥n del solicitante</h4>
                    <div class="info-grid">
                        <div class="info-item" tabindex="0">
                            <span class="label">Nombre:</span>
                            <span class="value">Se completar√° autom√°ticamente</span>
                        </div>
                        <div class="info-item" tabindex="0">
                            <span class="label">Universidad:</span>
                            <span class="value">Se completar√° autom√°ticamente</span>
                        </div>
                        <div class="info-item" tabindex="0">
                            <span class="label">Carrera:</span>
                            <span class="value">Se completar√° autom√°ticamente</span>
                        </div>
                    </div>
                </div>

                <!-- Botones -->
                <div class="button-group">
                    <button 
                        type="submit" 
                        class="submit-btn" 
                        [disabled]="loading || solicitudForm.invalid"
                        tabindex="0"
                        aria-label="Enviar solicitud de tutor√≠a"
                    >
                        @if (!loading) {
                        <span>üì® Enviar Solicitud</span>
                        }
                        @if (loading) {
                        <span>‚è≥ Enviando...</span>
                        }
                    </button>
                    
                    <button 
                        type="button" 
                        class="cancel-btn" 
                        [routerLink]="'/home'" 
                        [disabled]="loading"
                        tabindex="0"
                        aria-label="Cancelar y volver al inicio"
                    >
                        ‚Ü©Ô∏è Cancelar
                    </button>
                </div>

                <!-- Mensaje de campos requeridos -->
                <div class="required-hint" tabindex="0">
                    <small>* Campos obligatorios</small>
                </div>
            </form>
        </div>
    </div>
</div>